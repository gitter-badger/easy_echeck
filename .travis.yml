dist: easy_check
language: python
python:
  - "3.7.0"  # 3.7 development branch
# command to install dependencies
install:
#  - pip install -r requirement.rst
#  - brew install openssl
  - curl -sSf -o openssl-1.0.2r.tar.gz https://www.openssl.org/source/openssl-1.0.2r.tar.gz
  - sudo tar xjf openssl-1.0.2r.tar.gz
  - cd openssl-1.0.2r/
  - ./config --prefix=/usr/local/opt --openssldir=/usr/local/opt/openssl
  - make && make install
  - echo 'export PATH="/usr/local/opt/openssl/bin:$PATH"' >> ~/.bash_profile
  - source ~/.bash_profile
  - export LDFLAGS="-L/usr/local/opt/openssl/lib"
  - export CPPFLAGS="-I/usr/local/opt/openssl/include"
  - export PKG_CONFIG_PATH="/usr/local/opt/openssl/lib/pkgconfig"
  - export PYCURL_SSL_LIBRARY=openssl
#  - export PYCURL_SSL_LIBRARY=[openssl|gnutls|nss|ssl]
  - pip install pycurl
  - python setup.py install
#virtualenv:
#  system_site_packages: true
# command to run tests
script:
  - pytest